# 프론트엔드 프로젝트 구조 가이드

## 📁 루트 폴더 파일들

### 1. index.html

- **역할**: 애플리케이션의 진입점 (Entry Point)
- **내용**:
  - `<div id="root"></div>`: React 앱이 마운트될 DOM 요소
  - `<script type="module" src="/src/main.tsx"></script>`: 메인 TypeScript 파일 로드
- **특징**: Vite는 이 파일을 기반으로 개발 서버를 시작하고 번들링을 수행

### 2. package.json

- **역할**: 프로젝트 메타데이터 및 의존성 관리
- **주요 내용**:
  - `dependencies`: 프로덕션에 필요한 패키지 (react, react-dom, react-router-dom, axios)
  - `devDependencies`: 개발 시에만 필요한 패키지 (vite, typescript, tailwindcss, eslint)
  - `scripts`: 개발 서버 실행, 빌드, 린트 등의 명령어

### 3. vite.config.ts

- **역할**: Vite 빌드 도구 설정
- **주요 기능**:
  - React 플러그인 설정
  - 개발 서버 포트, 프록시 설정 등
  - 빌드 최적화 옵션

### 4. tsconfig.json / tsconfig.app.json / tsconfig.node.json

- **역할**: TypeScript 컴파일러 설정
- **tsconfig.json**: 전체 프로젝트의 기본 설정
- **tsconfig.app.json**: 앱 소스 코드용 설정
- **tsconfig.node.json**: Node.js 환경 (Vite 설정 파일 등)용 설정

### 5. tailwind.config.js

- **역할**: Tailwind CSS 설정
- **주요 내용**:
  - 커스텀 컬러, 폰트, 스페이싱 정의
  - 플러그인 추가
  - 테마 확장

### 6. postcss.config.js

- **역할**: PostCSS 설정 (CSS 처리 도구)
- **내용**: Tailwind CSS와 Autoprefixer 플러그인 설정

### 7. eslint.config.js

- **역할**: 코드 품질 및 스타일 검사 규칙
- **주요 기능**: 일관된 코드 스타일 유지, 잠재적 버그 탐지

---

## 📂 루트 폴더의 디렉토리들

### 1. public/

- **역할**: 정적 파일 저장소
- **특징**:
  - 빌드 시 그대로 dist 폴더로 복사됨
  - 직접 URL로 접근 가능
- **예시**:
  - `vite.svg`: 파비콘
  - 이미지, 폰트 등의 정적 리소스

### 2. src/

- **역할**: 애플리케이션 소스 코드의 메인 디렉토리
- **특징**: 모든 React 컴포넌트, 스타일, 로직이 여기에 위치

---

## 📁 src/ 폴더 내부 구조

### 1. src/main.tsx

- **역할**: React 애플리케이션의 시작점
- **주요 동작**:

  ```tsx
  import { createRoot } from 'react-dom/client';
  import App from './App.tsx';

  // DOM의 root 요소에 React 앱을 렌더링
  createRoot(document.getElementById('root')!).render(<App />);
  ```

### 2. src/App.tsx

- **역할**: 애플리케이션의 메인 컴포넌트
- **주요 기능**:
  - React Router 설정 (페이지 라우팅)
  - AuthProvider로 전역 인증 상태 관리
  - 각 URL에 맞는 페이지 컴포넌트 매핑

### 3. src/index.css

- **역할**: 전역 스타일 정의
- **내용**:
  - Tailwind CSS의 기본 레이어 import
  - 전역 폰트, 리셋 스타일 등

---

## 📂 src/ 하위 폴더들

### 1. src/api/

- **역할**: 백엔드 API 통신 로직
- **주요 파일**:
  - `axios.ts`: Axios 인스턴스 설정, 인터셉터 (인증 토큰 자동 추가)
  - `auth.api.ts`: 로그인, 회원가입 API
  - `posts.api.ts`: 게시글 CRUD API
  - `comments.api.ts`: 댓글 CRUD API

**예시 구조**:

```typescript
// axios.ts
const api = axios.create({
  baseURL: 'http://localhost:3000',
  headers: { 'Content-Type': 'application/json' },
});

// 요청 인터셉터: 토큰을 자동으로 헤더에 추가
api.interceptors.request.use(config => {
  const token = localStorage.getItem('access_token');
  if (token) config.headers.Authorization = `Bearer ${token}`;
  return config;
});
```

### 2. src/assets/

- **역할**: 정적 리소스 (이미지, 아이콘 등)
- **특징**:
  - import로 가져와서 사용
  - 빌드 시 해시가 추가되어 캐싱 최적화
- **예시**: `react.svg`

### 3. src/components/

- **역할**: 재사용 가능한 UI 컴포넌트들
- **하위 폴더**:
  - `common/`: 공통 컴포넌트 (버튼, 입력 필드 등)
  - `layout/`: 레이아웃 컴포넌트
    - `Header.tsx`: 상단 네비게이션 바
    - `Layout.tsx`: 페이지 레이아웃 래퍼
  - `posts/`: 게시글 관련 컴포넌트

### 4. src/pages/

- **역할**: 각 라우트에 대응하는 페이지 컴포넌트
- **하위 폴더**:
  - `Auth/`: 로그인, 회원가입 페이지
  - `Posts/`: 게시글 목록, 상세, 작성 페이지
  - `NotFound.tsx`: 404 페이지

### 5. src/context/

- **역할**: React Context API를 사용한 전역 상태 관리
- **주요 파일**:
  - `AuthContext.tsx`: 로그인 상태, 사용자 정보 전역 관리
    - `useAuth()` 훅 제공
    - localStorage를 통한 로그인 지속성

### 6. src/types/

- **역할**: TypeScript 타입 정의
- **주요 파일**:
  - `auth.types.ts`: 로그인, 회원가입 관련 타입
  - `post.types.ts`: 게시글 관련 타입
  - `comment.types.ts`: 댓글 관련 타입
  - `index.ts`: 타입들을 re-export

### 7. src/hooks/

- **역할**: 커스텀 React 훅
- **예시**:
  - `useDebounce`: 입력 디바운싱
  - `usePagination`: 페이지네이션 로직

### 8. src/utils/

- **역할**: 유틸리티 함수
- **예시**:
  - 날짜 포맷팅
  - 문자열 처리
  - 유효성 검사

---

## 🏠 헤더에 홈 버튼 추가하기 - 전체 흐름

### 1단계: 컴포넌트 수정 (src/components/layout/Header.tsx)

```tsx
import { Link } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';

const Header = () => {
  const { user, isAuthenticated, logout } = useAuth();

  return (
    <header className="bg-white shadow-sm">
      <nav className="max-w-7xl mx-auto px-4">
        <div className="flex justify-between items-center h-16">
          {/* 🆕 홈 버튼 추가 */}
          <Link to="/" className="text-gray-700 hover:text-jungle px-3 py-2">
            🏠 홈
          </Link>

          {/* 기존 네비게이션 */}
          <div className="flex items-center space-x-4">{/* ... 로그인/로그아웃 버튼 등 */}</div>
        </div>
      </nav>
    </header>
  );
};

export default Header;
```

### 2단계: 동작 흐름

#### ① 사용자가 홈 버튼 클릭

```
사용자 클릭 → <Link to="/"> 컴포넌트
```

#### ② React Router가 URL 변경 감지

```
React Router → URL을 "/" 로 변경 (페이지 새로고침 없음)
```

#### ③ App.tsx에서 라우트 매칭

```tsx
// src/App.tsx
<Routes>
  <Route
    path="/" // ← 현재 URL이 "/" 이므로 이 라우트가 매칭됨
    element={
      <Layout>
        <PostListPage /> // ← 게시글 목록 페이지가 렌더링됨
      </Layout>
    }
  />
</Routes>
```

#### ④ Layout 컴포넌트 렌더링

```tsx
// src/components/layout/Layout.tsx
const Layout = ({ children }) => {
  return (
    <div>
      <Header /> {/* ← 헤더 표시 (홈 버튼 포함) */}
      <main>{children}</main> {/* ← PostListPage가 여기에 렌더링 */}
    </div>
  );
};
```

#### ⑤ PostListPage 렌더링 및 데이터 로드

```tsx
// src/pages/Posts/PostListPage.tsx
const PostListPage = () => {
  const [posts, setPosts] = useState([]);

  useEffect(() => {
    // API 호출
    postsApi.getPosts().then(data => setPosts(data.posts));
  }, []);

  return <div>{/* 게시글 목록 표시 */}</div>;
};
```

#### ⑥ API 호출 흐름

```
PostListPage
  → src/api/posts.api.ts의 getPosts() 호출
  → axios 인스턴스가 HTTP GET 요청 (src/api/axios.ts)
  → 인터셉터가 자동으로 Authorization 헤더 추가
  → 백엔드 서버 (localhost:3000/posts)
  → 응답 데이터를 받아서 state 업데이트
  → 화면에 게시글 목록 렌더링
```

---

## 🔄 전체 데이터 흐름 다이어그램

```
┌─────────────────────────────────────────────────────────┐
│                    index.html                           │
│  - <div id="root"></div>                                │
│  - <script src="/src/main.tsx"></script>                │
└────────────────────┬────────────────────────────────────┘
                     │
                     ▼
┌─────────────────────────────────────────────────────────┐
│                  src/main.tsx                           │
│  - createRoot(document.getElementById('root'))          │
│  - render(<App />)                                      │
└────────────────────┬────────────────────────────────────┘
                     │
                     ▼
┌─────────────────────────────────────────────────────────┐
│                  src/App.tsx                            │
│  - <AuthProvider>로 전역 인증 상태 관리                      │
│  - <BrowserRouter>로 라우팅 설정                           │
│  - <Routes>에서 URL별 페이지 매핑                           │
└────────────────────┬────────────────────────────────────┘
                     │
                     ├─── 사용자가 "/" 접속
                     │    ▼
                     │    <Layout><PostListPage /></Layout>
                     │
                     ├─── 사용자가 "/login" 접속
                     │    ▼
                     │    <LoginPage />
                     │
                     └─── 사용자가 "/posts/:id" 접속
                          ▼
                          <Layout><PostDetailPage /></Layout>
```

---

## 🎯 컴포넌트 렌더링 순서 (홈 버튼 클릭 시)

```
1. Header 컴포넌트의 <Link to="/"> 클릭

2. React Router가 URL을 "/" 로 변경 (SPA이므로 새로고침 없음)

3. App.tsx의 <Routes>에서 path="/" 매칭

4. Layout 컴포넌트 렌더링 시작
   ├─ Header 렌더링 (useAuth 훅으로 로그인 상태 확인)
   └─ PostListPage 렌더링

5. PostListPage의 useEffect 실행
   └─ postsApi.getPosts() 호출

6. src/api/posts.api.ts
   └─ axios.get('/posts') 실행

7. src/api/axios.ts의 인터셉터
   ├─ localStorage에서 access_token 가져오기
   └─ Authorization 헤더에 토큰 추가

8. 백엔드 서버에 HTTP 요청
   └─ GET http://localhost:3000/posts

9. 응답 데이터를 받아서 state 업데이트
   └─ setPosts(data.posts)

10. 화면 재렌더링 → 게시글 목록 표시
```

---

## 💡 핵심 개념 정리

### SPA (Single Page Application)

- index.html 하나만 로드
- 페이지 이동 시 JavaScript로 DOM을 교체 (새로고침 없음)
- React Router가 URL 변경을 감지하고 적절한 컴포넌트 렌더링

### React Router 흐름

```
사용자 클릭 (<Link> 또는 navigate())
  ↓
URL 변경 (브라우저 history API 사용)
  ↓
<Routes>에서 매칭되는 <Route> 찾기
  ↓
해당 Route의 element 렌더링
```

### Context API (전역 상태 관리)

```
AuthProvider (App.tsx 최상위)
  ↓
모든 하위 컴포넌트에서 useAuth() 훅 사용 가능
  ↓
로그인 상태, 사용자 정보를 props 없이 접근
```

### Axios 인터셉터

```
API 호출
  ↓
Request Interceptor (요청 전 실행)
  - 토큰을 자동으로 헤더에 추가
  ↓
서버 요청
  ↓
Response Interceptor (응답 후 실행)
  - 401 에러 시 로그인 페이지로 리다이렉트
```

---

## 📝 파일 수정 시 영향 범위

| 파일 수정                          | 영향 범위                                   |
| ---------------------------------- | ------------------------------------------- |
| `src/components/layout/Header.tsx` | 모든 Layout을 사용하는 페이지 (헤더 변경)   |
| `src/App.tsx`                      | 전체 라우팅 구조 변경                       |
| `src/context/AuthContext.tsx`      | useAuth()를 사용하는 모든 컴포넌트          |
| `src/api/axios.ts`                 | 모든 API 호출 (인터셉터 변경)               |
| `tailwind.config.js`               | 전체 앱의 스타일 (커스텀 컬러, 스페이싱 등) |
| `vite.config.ts`                   | 빌드 프로세스 및 개발 서버 설정             |

---

## 🚀 개발 워크플로우

1. **개발 서버 시작**

   ```bash
   pnpm dev
   ```

   - Vite가 index.html을 읽고 src/main.tsx 로드
   - HMR (Hot Module Replacement) 활성화 → 코드 수정 시 자동 새로고침

2. **컴포넌트 수정**
   - Header.tsx 파일 수정
   - 저장 시 브라우저가 자동으로 변경사항 반영

3. **타입 체크**

   ```bash
   tsc --noEmit
   ```

4. **린트 검사**

   ```bash
   pnpm lint
   ```

5. **프로덕션 빌드**

   ```bash
   pnpm build
   ```

   - dist/ 폴더에 최적화된 파일 생성

---

## 🔍 디버깅 팁

### React DevTools (크롬 확장)

- 컴포넌트 트리 확인
- Props, State 실시간 조회

### 네트워크 탭 (브라우저 개발자 도구)

- API 요청/응답 확인
- Authorization 헤더 확인

### Console 로그

```tsx
console.log('현재 사용자:', user);
console.log('API 응답:', data);
```

### React Router 디버깅

```tsx
import { useLocation } from 'react-router-dom';

const location = useLocation();
console.log('현재 경로:', location.pathname);
```

---

이 문서는 Obsidian 또는 다른 마크다운 뷰어에서 보기 좋게 작성되었습니다.
